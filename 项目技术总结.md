# Zanime

## 技术栈：
- 后端：Go、Gin、NSQ、Redis、MySQL、gRPC、Python
- 前端：Vue、JavaScript、HTML/CSS
- 工具链：Docker、Nginx、Colly爬虫

## 主要模块：

### 网关模块：
- 基于 Gin 框架实现 RESTful API
- 集成 JWT 身份验证、API 限流等全局中间件
- 优雅封装动漫资源获取、搜索、推荐等核心接口
- 遵循领域驱动设计思想(DDD)

### 评论模块：
- Redis 缓存优化评论读取性能
- 虚拟ID + 消息队列实现评论即时展示和异步持久化
- 消息队列 + 推送模块实现实时通知被回复者

### 动漫数据：
- 基于 Colly 的分布式爬虫系统
- 静态资源(标题、类型、地区等)主动爬取
- 视频URL采用懒加载式爬取策略
- 分布式锁 + 双重校验确保爬取请求唯一性
- 已覆盖80%主流动漫资源

### 推荐模块：
- 基于用户停留时间的协同过滤推荐
- NSQ消息队列处理实时用户行为数据
- 多维度相似度计算：
  - 使用余弦相似度算法计算视频相似度
  - 结合视频标题(TF-IDF)、类型、地区等元数据
  - 动态调整各维度权重
- 性能优化：
  - 支持增量更新推荐模型
  - 读写分离与并发控制
  - 定时更新与冷启动处理

### 周边购买模块：
- 基于NSQ的延迟队列实现订单超时处理
- Redis分布式锁控制库存并发更新
- 5分钟订单待支付状态自动失效机制

### 推送模块：
- WebSocket实现用户登录长连接
- Vue-Router实现域名下页面共用连接
- 通过gRPC远程调用进行JWT身份验证
- 实现连接稳定性和连接频率的平衡

### 监控模块：
- 分级日志系统(Info/Warning/Error/Fatal)
- WebSocket推送日志到管理后台实时展示
- 支持日志持久化存储

### 前端实现：
- 基于Vue框架的响应式架构
- 组件化开发提高代码复用
- 现代化UI设计与过渡动画
- 包含用户端(Zanime)和管理端(ZanimeMonitor)
